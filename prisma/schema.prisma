generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

// 1. 設定檔 (改用 userId 來辨識)
model Settings {
  id            Int     @id @default(autoincrement())
  userId        String  @unique // ✨ 關鍵：記錄這是誰的設定，且每人只能有一筆
  totalSalary   Int     @default(32000)
  rent          Int     @default(8500)
  payDay        Int     @default(5)     // ✨ 新增：發薪日 (預設 5號)
  savingsTarget Int     @default(6200)
  riskTarget    Int     @default(3200)
  fixedCost     Int     @default(3000)
}

// 2. 記帳紀錄
model Expense {
  id        Int      @id @default(autoincrement())
  userId    String   // ✨ 關鍵：記錄這筆帳是誰記的
  amount    Int
  name      String
  type      String   @default("EXPENSE")
  createdAt DateTime @default(now())
}

// 3. 投資組合
model Portfolio {
  id           Int      @id @default(autoincrement())
  userId       String   // ✨ 關鍵
  symbol       String
  shares       Int
  avgCost      Float
  currentPrice Float
  createdAt    DateTime @default(now())
}

// 4. 風險項目
model RiskItem {
  id        Int      @id @default(autoincrement())
  userId    String   // ✨ 關鍵
  name      String
  amount    Int
  type      String
  createdAt DateTime @default(now())
}
